# Blocks Analytics

An analytics plataform to dive deep into graphics, timeseries and trends for data generated by [Cardano](https://cardano.org) Blocks.

This application uses Phoenix LiveView and [Xogmios](https://github.com/wowica/xogmios), an Elixir client for Ogmios.

Xogmios is an Elixir client for the Cardano blockchain. You can use it to perform queries, stream blocks as they become available and submit transactions to the network.

It connects to a Cardano node through Ogmios.

> Ogmios is a lightweight bridge interface for a Cardano node. It offers a WebSockets API that enables local clients to speak Ouroboros' mini-protocols via JSON/RPC. - https://ogmios.dev/

It is inspired by the [blocks](https://github.com/wowica/blocks), a Cardano block explorer using Phoenix LiveView and Xogmios. You can visit and see the list of the last 10 blocks being generated here [https://blocks.workwithcardano.com/](https://blocks.workwithcardano.com/).

Both of the projects refered above were developed by [@caike](https://github.com/caike) and the [Work With Cardano](https://github.com/wowica) team.

## Objectives

The purpose of this application is to collect the data related to the generated Cardano Blocks, store it on a database and transform it into an analytics dataset, so that we can create different kind of analysis.

These are the main ojectives we would like to achieve while working on this project:

* Learning the ClickHouse and the [ecto_ch](https://github.com/plausible/ecto_ch), the ClickHouse adapter for Ecto.
* Learning the DuckDB and apply the knowledge on how to create analytics platforms.
* Learning how to use the [Xogmios](https://github.com/wowica/xogmios) API.
* Learning on how to use [daisyUI](https://daisyui.com/docs/install/phoenix/) to create rich User Interfaces with Phoenix 1.8.
* Learning more about Cardano through [Cardano Foudation Course](https://learn.academy.cardanofoundation.org/landing).

## Analytics Databases Engines

We are going to follow the same best practices the [Plausible](https://github.com/plausible/analytics)'s team already have developing their analytics plataform. They use the [ClickHouse](https://clickhouse.com/clickhouse) engine. And to take advantage of it into the Elixir ecosystem, they created [ecto_ch](https://github.com/plausible/ecto_ch), the ClickHouse adapter for Ecto.

Here is a great opportunity to read the [ClickHouse - Lightning Fast Analytics for Everyone](https://www.vldb.org/pvldb/vol17/p3731-schulze.pdf) paper.

There's also this post by [Andy LeClair](https://andyleclair.dev/posts/2025/01-21-things-you-can-do-with-ecto.html) describring on how to use some [ecto_ch](https://github.com/plausible/ecto_ch) capabilities powered by ClickHouse.

The initial idea is to fetch the Cardano Block, use the [ecto_ch](https://github.com/plausible/ecto_ch) to persists the data appropriately for timeseries analysis and then, analyse it with DuckDB.

## Examples

There's some great Analytics plataforms that graphically present the Cardano Blocks and whole chain of data related to it. Some of them are:

* [eUTxO.org - Cardano Blockchain Explorer](https://eutxo.org)
* [ADASTAT](https://adastat.net)
* [Cexplorer.io](https://cexplorer.io)

The whole list can be found [here](https://explorer.cardano.org).

We don't intent to develop an application at this level. We're listing them here only for refence.

## How to use this application?

Run `mix setup` to install and setup dependencies.

To start the Phoenix server, on the terminal, populate the `OGMIOS_URL` environment variable with the demeter Authenticated Endpoint URL. Note that we replace the protocol from `https` to websocket as `wss`. More information about demeter and its Authenticated Endipoint URL will be provide later.

```shell
OGMIOS_URL="wss://dmtr_ogmios_your_Authenticated_Endipoint_URL.demeter.run" iex -S mix phx.server
```


Now you can visit [`localhost:4000`](http://localhost:4000) from your browser.
